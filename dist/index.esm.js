import e from"react";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".react-horizontal-scrolling-menu--scroll-container {\n  display: flex;\n  height: max-content;\n  overflow-y: hidden;\n  position: relative;\n  width: 100%;\n}\n\n.react-horizontal-scrolling-menu--scroll-container.rtl {\n  direction: rtl;\n}\n\n.react-horizontal-scrolling-menu--inner-wrapper {\n  display: flex;\n  overflow-y: hidden;\n}\n\n.react-horizontal-scrolling-menu--wrapper {\n  display: flex;\n  flex-direction: column;\n}\n\n.react-horizontal-scrolling-menu--header,\n.react-horizontal-scrolling-menu--footer {\n  width: 100%;\n}\n\n.react-horizontal-scrolling-menu--arrow-left,\n.react-horizontal-scrolling-menu--arrow-right {\n  display: flex;\n}\n");const t="react-horizontal-scrolling-menu",n=`${t}--separator`,r=`${t}--item`,o=`${t}--scroll-container`,i=`${t}--wrapper`,l=`${t}--inner-wrapper`,a=`${t}--header`,s=`${t}--arrow-left`,u=`${t}--arrow-right`,c=`${t}--footer`;var d=Object.freeze({__proto__:null,rootClassName:t,separatorString:"-separator",separatorClassName:n,itemClassName:r,scrollContainerClassName:o,wrapperClassName:i,innerWrapperClassName:l,headerClassName:a,arrowLeftClassName:s,arrowRightClassName:u,footerClassName:c,id:"itemId",dataKeyAttribute:"data-key",dataIndexAttribute:"data-index"});function v({className:t="",children:n,onScroll:r=(()=>{}),scrollRef:i,onTouchStart:l,onTouchEnd:a,onTouchMove:s}){const u=e.useMemo((()=>`${o} ${t}`),[t]);return e.createElement("div",{className:u,onScroll:r,ref:i,onTouchStart:l,onTouchEnd:a,onTouchMove:s},n)}var m=e.memo((function({className:t,id:n,index:r,refs:o}){const i=e.useRef(null);return o[r]=i,e.createElement("div",Object.assign({className:t},{"data-key":n,"data-index":r},{ref:i}))}));var f,h=e.memo((function({children:t,className:n,id:r,index:o,refs:i}){const l=e.useRef(null);return i[String(o)]=l,e.createElement("div",Object.assign({className:n},{"data-key":r,"data-index":o},{ref:l}),t)}));function p(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function g(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function b(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return g(n.overflowY,t)||g(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function y(e,t,n,r,o,i,l,a){return i<e&&l>t||i>e&&l<t?0:i<=e&&a<=n||l>=t&&a>=n?i-e-r:l>t&&a<n||i<e&&a>n?l-t+o:0}function w(e,t){var n=window,r=t.scrollMode,o=t.block,i=t.inline,l=t.boundary,a=t.skipOverflowHiddenElements,s="function"==typeof l?l:function(e){return e!==l};if(!p(e))throw new TypeError("Invalid target");for(var u=document.scrollingElement||document.documentElement,c=[],d=e;p(d)&&s(d);){if((d=d.parentElement)===u){c.push(d);break}null!=d&&d===document.body&&b(d)&&!b(document.documentElement)||null!=d&&b(d,a)&&c.push(d)}for(var v=n.visualViewport?n.visualViewport.width:innerWidth,m=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,h=window.scrollY||pageYOffset,g=e.getBoundingClientRect(),w=g.height,x=g.width,C=g.top,E=g.right,I=g.bottom,N=g.left,S="start"===o||"nearest"===o?C:"end"===o?I:C+w/2,M="center"===i?N+x/2:"end"===i?E:N,k=[],T=0;T<c.length;T++){var $=c[T],O=$.getBoundingClientRect(),A=O.height,W=O.width,R=O.top,V=O.right,j=O.bottom,B=O.left;if("if-needed"===r&&C>=0&&N>=0&&I<=m&&E<=v&&C>=R&&I<=j&&N>=B&&E<=V)return k;var L=getComputedStyle($),P=parseInt(L.borderLeftWidth,10),H=parseInt(L.borderTopWidth,10),z=parseInt(L.borderRightWidth,10),D=parseInt(L.borderBottomWidth,10),F=0,X=0,Y="offsetWidth"in $?$.offsetWidth-$.clientWidth-P-z:0,_="offsetHeight"in $?$.offsetHeight-$.clientHeight-H-D:0;if(u===$)F="start"===o?S:"end"===o?S-m:"nearest"===o?y(h,h+m,m,H,D,h+S,h+S+w,w):S-m/2,X="start"===i?M:"center"===i?M-v/2:"end"===i?M-v:y(f,f+v,v,P,z,f+M,f+M+x,x),F=Math.max(0,F+h),X=Math.max(0,X+f);else{F="start"===o?S-R-H:"end"===o?S-j+D+_:"nearest"===o?y(R,j,A,H,D+_,S,S+w,w):S-(R+A/2)+_/2,X="start"===i?M-B-P:"center"===i?M-(B+W/2)+Y/2:"end"===i?M-V+z+Y:y(B,V,W,P,z+Y,M,M+x,x);var U=$.scrollLeft,q=$.scrollTop;S+=q-(F=Math.max(0,Math.min(q+F,$.scrollHeight-A+_))),M+=U-(X=Math.max(0,Math.min(U+X,$.scrollWidth-W+Y)))}k.push({el:$,top:F,left:X})}return k}function x(e){return e===Object(e)&&0!==Object.keys(e).length}function C(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(x(t)&&"function"==typeof t.behavior)return t.behavior(n?w(e,t):[]);if(n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:x(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,o=e.top,i=e.left;r.scroll&&n?r.scroll({top:o,left:i,behavior:t}):(r.scrollTop=o,r.scrollLeft=i)}))}(w(e,r),r.behavior)}}var E=function(){return f||(f="performance"in window?performance.now.bind(performance):Date.now),f()};function I(e){var t=E(),n=Math.min((t-e.startTime)/e.duration,1),r=e.ease(n),o=e.startX+(e.x-e.startX)*r,i=e.startY+(e.y-e.startY)*r;e.method(o,i),o!==e.x||i!==e.y?requestAnimationFrame((function(){return I(e)})):e.cb()}function N(e,t,n,r,o,i){var l,a,s,u;void 0===r&&(r=600),void 0===o&&(o=function(e){return 1+--e*e*e*e*e}),l=e,a=e.scrollLeft,s=e.scrollTop,u=function(t,n){e.scrollLeft=Math.ceil(t),e.scrollTop=Math.ceil(n)},I({scrollable:l,method:u,startTime:E(),startX:a,startY:s,x:t,y:n,duration:r,ease:o,cb:i})}var S=function(e,t){var n=t||{};return function(e){return e&&!e.behavior||"smooth"===e.behavior}(n)?C(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,behavior:function(e){return Promise.all(e.reduce((function(e,t){var r=t.el,o=t.left,i=t.top,l=r.scrollLeft,a=r.scrollTop;return l===o&&a===i?e:[].concat(e,[new Promise((function(e){return N(r,o,i,n.duration,n.ease,(function(){return e({el:r,left:[l,o],top:[a,i]})}))}))])}),[]))}}):Promise.resolve(C(e,t))};function M(e,t,n,r,o,i){var l,a;const s=(null===(a=null===(l=e)||void 0===l?void 0:l.entry)||void 0===a?void 0:a.target)||e,u=t||"smooth";if(s)return i?null==s?void 0:s.scrollIntoView({behavior:u,inline:n||"end",block:r||"nearest"}):S(s,Object.assign({behavior:u,inline:n||"end",block:r||"nearest",duration:500},o))}const k=e=>document.querySelector(`[data-key='${e}']`),T=e=>document.querySelector(`[data-index='${e}']`);function $(t){return e.isValidElement(t)&&t||"function"==typeof t&&e.createElement(t,null)||null}const O=e=>e.filter((e=>!new RegExp(".*-separator$").test(e))),A=e=>{var t,n,r;return String((null===(n=null===(t=e)||void 0===t?void 0:t.props)||void 0===n?void 0:n.itemId)||String((null===(r=e)||void 0===r?void 0:r.key)||"").replace(/^\.\$/,""))};function W({children:t,itemClassName:o="",refs:i,separatorClassName:l=""}){const a=e.Children.toArray(t).filter(Boolean),s=a.length,u=e.useMemo((()=>`${r} ${o}`),[o]),c=e.useMemo((()=>`${n} ${l}`),[l]);return e.createElement(e.Fragment,null,a.map(((t,n)=>{const r=A(t),o=r+"-separator",l=n+1===s;return[e.createElement(h,{className:u,id:r,key:"menuItem__"+r,refs:i,index:n},t),!l&&e.createElement(m,{className:c,id:o,refs:i,key:o,index:n+.1})]})))}const R="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;function V({items:t,itemsChanged:n,refs:r,options:o}){const i=e.useRef(),[l,a]=e.useState([]),s=e.useRef(+setTimeout((()=>{}),0)),u=e.useCallback((e=>{t.set(function(e,t){return[...e].map((e=>{var n,r,o,i;const l=e.target,a=String(null!==(r=null===(n=null==l?void 0:l.dataset)||void 0===n?void 0:n.key)&&void 0!==r?r:"");return[a,{index:String(null!==(i=null===(o=null==l?void 0:l.dataset)||void 0===o?void 0:o.index)&&void 0!==i?i:""),key:a,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(e,o)),clearTimeout(s.current),s.current=+setTimeout((()=>requestAnimationFrame((()=>{a((e=>{const n=t.getVisible().map((e=>e[1].key));return JSON.stringify(e)!==JSON.stringify(n)?n:e}))}))),o.throttle)}),[t,o]);return R((()=>{const e=(e=>Object.values(e).map((e=>e.current)).filter(Boolean))(r),t=i.current||new IntersectionObserver(u,o);return i.current=t,e.forEach((e=>t.observe(e))),()=>{clearTimeout(s.current),t.disconnect(),i.current=void 0}}),[u,n,o,r]),{visibleItems:l}}function j(t,n){const[r,o]=e.useState(""),i=e.useMemo((()=>{return n=t,e.Children.toArray(n).map(A).filter(Boolean);var n}),[t]);return e.useEffect((()=>{const e=i.filter(Boolean).join("");n.toItemsWithoutSeparators().filter((e=>!i.includes(e))).forEach((e=>{var t,r;const o=(null===(t=n.last())||void 0===t?void 0:t.key)===e&&(null===(r=n.prev(e))||void 0===r?void 0:r.key)||"";n.delete(o),n.delete(`${e}-separator`),n.delete(e)})),o(e)}),[i,n]),r}class B extends Map{toArr(){return this.sort([...this])}toItems(){return this.toArr().map((([e])=>e))}toItemsWithoutSeparators(){return O(this.toItems())}toItemsKeys(){return this.toItems()}sort(e){return e.sort((([,e],[,t])=>+e.index-+t.index))}set(e,t){return Array.isArray(e)?this.sort(e).forEach((([e,t])=>{super.set(String(e),t)})):super.set(String(e),t),this}first(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}last(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}filter(e){return this.toArr().filter(e)}find(e){return this.toArr().find(e)}findIndex(e){return this.toArr().findIndex(e)}prev(e){var t;const n=this.toArr(),r=n.findIndex((([t,n])=>t===e||n===e));return-1!==r?null===(t=n[r-1])||void 0===t?void 0:t[1]:void 0}next(e){var t;const n=this.toArr(),r=n.findIndex((([t,n])=>t===e||n===e));return-1!==r?null===(t=n[r+1])||void 0===t?void 0:t[1]:void 0}getVisible(){return this.filter((e=>e[1].visible))}}const L={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100};const P=e.createContext({}),H=e=>e.reduce(((e,t)=>e.concat(t).concat(`${t}-separator`)),[]).slice(0,-1);function z(e,t){const n=O(e),r=O(t);return{prev:()=>H(function(e,t){const n=e.findIndex((e=>e===(null==t?void 0:t[0]))),r=t.length,o=n-r,i=o<0,l=i?0:o,a=e.slice(l,i?r:n);return a.length===r?a:e.slice(n,r)}(n,r)),next:()=>H(function(e,t){const n=e.findIndex((e=>{var n;return e===(null===(n=t.slice(-1))||void 0===n?void 0:n[0])})),r=t.length,o=n+r+1,i=o>e.length-1,l=i?e.length-1:o,a=e.slice(i?l-r+1:n+1,l);return a.length===r?a:e.slice(e.length-r,e.length+r)}(n,r))}}const D=e=>{var t;const n=(e=>e.filter(((e,t,n)=>{const r=0===t,o=t===n.length-1,i=new RegExp("-separator").test(e);return!((r||o)&&i)})))(e),r=n[Math.floor(n.length/2)];return{first:null==n?void 0:n[0],center:r,last:null===(t=n.slice(-1))||void 0===t?void 0:t[0]}};function F({LeftArrow:t,RightArrow:n,children:r,Header:o,Footer:d,transitionDuration:m=500,transitionEase:f,transitionBehavior:h,onInit:p=(()=>{}),onUpdate:g=(()=>{}),onMouseDown:b,onMouseUp:y,onMouseMove:w,onScroll:x=(()=>{}),onWheel:C=(()=>{}),onTouchStart:E=(()=>null),onTouchEnd:I=(()=>null),onPointerDown:N=(()=>null),onPointerUp:S=(()=>null),onPointerMove:A=(()=>null),onTouchMove:R=(()=>null),options:H=L,scrollContainerClassName:z="",itemClassName:D="",separatorClassName:F="",wrapperClassName:X="",apiRef:Y={current:{}},RTL:_,noPolyfill:U}){const q=$(t),J=$(n),K=$(o),G=$(d),Q=e.useRef(null),[Z]=e.useState({}),ee=e.useMemo((()=>Object.assign(Object.assign(Object.assign({},L),H),{root:Q.current})),[H,Q.current]),te=e.useRef(new B).current,ne=j(r,te),{visibleItems:re}=V({items:te,itemsChanged:ne,options:ee,refs:Z}),oe=!!re.length,ie=e.useMemo((()=>function(e,t=[],n,r,o,i){var l,a;const s=O(t),u=!!(null===(l=e.first())||void 0===l?void 0:l.visible),c=!!(null===(a=e.last())||void 0===a?void 0:a.visible),d=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},v=()=>{var t,n;return e.prev(null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1])},m=()=>{var t,n,r,o;return e.next(null===(o=null===(r=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===o?void 0:o[1])};return{getItemById:d,getItemElementById:k,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getItemElementByIndex:T,getNextItem:m,getPrevItem:v,isFirstItemVisible:u,isItemVisible:e=>t.includes(String(e)),isLastItem:t=>e.last()===d(t),isLastItemVisible:c,scrollNext:(e,t,l,{duration:a,ease:s,boundary:u=(null==n?void 0:n.current)}={})=>{const c=null!=e?e:null==r?void 0:r.behavior;return M(m(),c,t||"start",l||"nearest",{boundary:u,duration:null!=a?a:null==r?void 0:r.duration,ease:null!=s?s:null==r?void 0:r.ease},o||i)},scrollPrev:(e,t,l,{duration:a,ease:s,boundary:u=(null==n?void 0:n.current)}={})=>{const c=null!=e?e:null==r?void 0:r.behavior;return M(v(),c,t||"end",l||"nearest",{boundary:u,duration:null!=a?a:null==r?void 0:r.duration,ease:null!=s?s:null==r?void 0:r.ease},o||i)},scrollToItem:(e,t,o,i,l)=>{var a,s;return M(e,null!=t?t:null==r?void 0:r.behavior,o,i,Object.assign(Object.assign({boundary:null==n?void 0:n.current},l),{duration:null!==(a=null==l?void 0:l.duration)&&void 0!==a?a:null==r?void 0:r.duration,ease:null!==(s=null==l?void 0:l.ease)&&void 0!==s?s:null==r?void 0:r.ease}))},visibleItems:t,visibleItemsWithoutSeparators:s}}(te,re,Q,{duration:m,ease:f,behavior:h},_,U)),[te,re,ne,_,U]),le=e.useCallback((()=>Object.assign(Object.assign({},ie),{initComplete:oe,items:te,visibleItems:re,scrollContainer:Q})),[ie,oe,te,re,Q]),[ae,se]=e.useState(le);!function({cb:t=(()=>{}),condition:n,hash:r}){e.useEffect((()=>{n&&t()}),[r,n])}({cb:()=>g(ae),condition:function({cb:t,condition:n}){const[r,o]=e.useState(!1);return e.useEffect((()=>{n&&!r&&(o(!0),t())}),[n,r]),r}({cb:()=>p(ae),condition:oe}),hash:JSON.stringify(re.concat(String(null==ae?void 0:ae.isFirstItemVisible)).concat(String(null==ae?void 0:ae.isLastItemVisible)))}),e.useEffect((()=>{se(le())}),[le]),Y.current=ae;const ue=e.useCallback((e=>x(ae,e)),[x,ae]),ce=e.useCallback((e=>E(ae,e)),[E,ae]),de=e.useCallback((e=>I(ae,e)),[I,ae]),ve=e.useCallback((e=>S(ae,e)),[S,ae]),me=e.useCallback((e=>A(ae,e)),[A,ae]),fe=e.useCallback((e=>N(ae,e)),[N,ae]),he=e.useCallback((e=>R(ae,e)),[R,ae]),pe=e.useCallback((e=>C(ae,e)),[C,ae]),ge=e.useMemo((()=>`${i} ${X}`),[X]),be=e.useMemo((()=>`${z}${_?" rtl":""}`),[_,z]);return e.createElement("div",{className:ge,onWheel:pe,onMouseDown:null==b?void 0:b(ae),onMouseUp:null==y?void 0:y(ae),onMouseMove:null==w?void 0:w(ae)},e.createElement(P.Provider,{value:ae},e.createElement("div",{className:a},K),e.createElement("div",{className:l,onPointerUp:ve,onPointerMove:me,onPointerDown:fe},e.createElement("div",{className:s},q),e.createElement(v,{className:be,onScroll:ue,scrollRef:Q,onTouchStart:ce,onTouchEnd:de,onTouchMove:he},e.createElement(W,{refs:Z,itemClassName:D,separatorClassName:F},r)),e.createElement("div",{className:u},J)),e.createElement("div",{className:c},G)))}export{F as ScrollMenu,P as VisibilityContext,d as constants,D as getItemsPos,z as slidingWindow};
